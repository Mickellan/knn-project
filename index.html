<html>
<head>
    <title>Generate Images of Fruit</title>
    <meta charset="utf-8" />
    <link rel="icon" type="image/x-icon" href="./favicon.png" />
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <link rel="stylesheet" href="./assets/css/examples.css" />
</head>
<body>
    <nav class="navbar" style="background-color: #000000">
        <div class="app-header">
            <a href="">
                <img src="./logo.png" class="logo" />
            </a>
            <a class="title" href="" style="color: #f0ab3c">KNN avg Generator</a>
        </div>
    </nav>

    <div>Type conditions here: </div>
    <table>
        <tr>
            <td> Weight </td>
            <td> <input type="text" style="border:3px solid #F7730E;" value="0" id="weightInput"/> </td>

            <td> Color </td>
            <td> <input type="text" style="border:3px solid #F7730E;" value="175" id="colorInput"/> </td>

            <td> Roundness </td>
            <td> <input type="text" style="border:3px solid #F7730E;" value="0" id="roundnessInput"/> </td>

            <td> Texture </td>
            <td> <input type="text" style="border:3px solid #F7730E;" value="0" id="textureInput"/> </td>

            <td> Symmetry </td>
            <td> <input type="text" style="border:3px solid #F7730E;" value="300" id="symmetryInput"/> </td>

            <td> RGB (comma-separated) </td>
            <td> <input type="text" style="border:3px solid #F7730E;" value="255,255,255" id="rgbInput"/> </td>
        </tr>
    </table>

    <button id="generateButton" py-click="my_gen_function()" class="py-button">Generate</button>

    <p id="current-val"></p>
    <div id="test-output"></div>
    <div id="pandas-output"></div>

    <section class="pyscript"> 
        <div id="mpl"></div>

        <py-config>
            packages = [
                "matplotlib",
                "numpy",
                "PIL"
            ]
            plugins = [
                "https://pyscript.net/latest/plugins/python/py_tutor.py"
            ]
        </py-config>

        <script type="py">
            import matplotlib.pyplot as plt
            import numpy as np
            from PIL import Image

            def my_gen_function():
                weight = float(Element('weightInput').element.value)
                color = float(Element('colorInput').element.value)
                roundness = float(Element('roundnessInput').element.value)
                texture = float(Element('textureInput').element.value)
                symmetry = float(Element('symmetryInput').element.value)

                rgb_values = Element('rgbInput').element.value.split(',')
                rgb = [int(x) for x in rgb_values]

                test_x = np.array([weight, color, roundness, texture, symmetry])
                generated_img = generate_image(test_x, rgb)

                fig, ax = plt.subplots()
                ax.imshow(generated_img)
                ax.set_title("Generated Image")
                plt.axis("off")
                plt.show()

            # Function to generate image using RGB values
            def generate_image(test_x, rgb):
                # Here, you can use test_x and rgb to generate the image
                # For demonstration, let's create a random image
                width = 100
                height = 100
                img = np.zeros((height, width, 3), dtype=np.uint8)
                img[:, :, 0] = rgb[0]
                img[:, :, 1] = rgb[1]
                img[:, :, 2] = rgb[2]
                return img

        </script>
    </section>
</body>
</html>
